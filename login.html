<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <link rel="icon" href="MyMy Shop.ico">
        <link rel="stylesheet" href="Styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Sans:wght@400;500">
        <title>MyMy Shop</title>
    </head>

    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <script src="auth.js">
            if(isLoggedIn()){
                window.location.href = 'index.html';
            }
        </script>
        <div id="root">
            <div class="loginContainer">
                <div id="loginLogo">MyMy Shop</div>
                <div class="loginWrapper">
                    <div class="loginWrapper_1">
                        <div class="loginBox">
                            <form id="loginForm">
                                <div class="formGroup">
                                    <input id="userName" type="text" autocapitalize="none" placeholder="Username">
                                </div>
                                <div class="formGroup">
                                    <input id="password" type="password" autocapitalize="none" placeholder="Password">
                                </div>
                                <div class="errorMessageContainer"></div>
                                <input id="loginButton" value="Login" type="submit">
                            </form>
                        </div>
                    </div>
                    <div class="loginWrapper_2">
                        <div class="loginCredentialsWrapper">
                            <div class="loginCredentials" id="loginCredentials">
                                <h4>Accepted Usernames are:</h4>
                                admin
                                <br>
                                ayush
                                <br>
                                guest
                                <br>
                            </div>
                            <div class="loginPassword">
                                <h4>Password for all users: </h4>
                                secret_mymy
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const loginForm = document.querySelector('form');
            const userNameInput = document.getElementById('userName');
            const passwordInput = document.getElementById('password');
            const loginButton = document.getElementById('loginButton');
            const errorMessageContainer = document.querySelector('.errorMessageContainer');

            const acceptedUsernames = ['admin', 'ayush', 'guest'];
            const acceptedPassword = 'secret_mymy';

            loginForm.addEventListener('submit', (event) => {
                event.preventDefault();

                const enteredUsername = userNameInput.value.trim();
                const enteredPassword = passwordInput.value.trim();

                if (acceptedUsernames.includes(enteredUsername) && enteredPassword === acceptedPassword) {
                    console.log('Login successful!');
                    document.cookie = `isLoggedIn=true; path=/; expires=${new Date(Date.now() + 24 * 60 * 60 * 1000).toUTCString()}`;
                    window.location.href = 'index.html'
                } 
                else {
                    errorMessageContainer.textContent = 'Invalid username or password.';
                }
            });
        </script>

    </body>

</html>